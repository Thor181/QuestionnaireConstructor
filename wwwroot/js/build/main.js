(()=>{"use strict";const e=class{getControl(e,t){return n=this,i=void 0,o=function*(){let n=yield fetch(e);if(n.ok){let e=yield n.text();if(null!=t)for(let n in t)i=e,r=`{{${n}}}`,o=t[n],e=i.split(r).join(null!=o?o:"");return e}var i,r,o;return console.error(yield n.text()),"{{undefined}}"},new((r=void 0)||(r=Promise))((function(e,t){function l(e){try{s(o.next(e))}catch(e){t(e)}}function a(e){try{s(o.throw(e))}catch(e){t(e)}}function s(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(l,a)}s((o=o.apply(n,i||[])).next())}));var n,i,r,o}};const t=class extends e{constructor(){super(),this.rendered=Object.create({})}render(){const e=Object.create(null,{getControl:{get:()=>super.getControl}});return t=this,n=void 0,r=function*(){return yield e.getControl.call(this,"/js/components/AvailableSlide.html",this.rendered)},new((i=void 0)||(i=Promise))((function(e,o){function l(e){try{s(r.next(e))}catch(e){o(e)}}function a(e){try{s(r.throw(e))}catch(e){o(e)}}function s(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(l,a)}s((r=r.apply(t,n||[])).next())}));var t,n,i,r}};const n=class extends e{constructor(){super(),this.rendered=Object.create({})}render(){const e=Object.create(null,{getControl:{get:()=>super.getControl}});return t=this,n=void 0,r=function*(){return yield e.getControl.call(this,"/js/components/SidebarItem.html",this.rendered)},new((i=void 0)||(i=Promise))((function(e,o){function l(e){try{s(r.next(e))}catch(e){o(e)}}function a(e){try{s(r.throw(e))}catch(e){o(e)}}function s(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(l,a)}s((r=r.apply(t,n||[])).next())}));var t,n,i,r}},i=new Map;i.set("log",console.log),i.set("warn",console.warn),i.set("error",console.error);var r,o,l,a,s,d,c,u=function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)};class h{static initialize(){let e=window.localStorage.getItem(u(this,r,"f",o)),t=JSON.parse(e);if(null==t||0==(null==t?void 0:t.length))return n="warn",void(typeof(a="GlobalMeta: initialize is not completed - the data in the storage is empty")==typeof String?i.get(n)(`[${(new Date).toLocaleTimeString()}] ${a}`):i.get(n)(a));for(var n,a,s=0;s<t.length;s++){let e=t.filter((e=>e.meta.order==s+1))[0];u(this,r,"m",l).call(this,e.meta.id,e.meta.type)}}static addOrUpdateSlideData(e){var t;if(null==e)return void console.error("questionData value cannot be null");null==e.meta.id&&(e.meta.id=function(e){let t=Math.floor(1e7*Math.random());for(;e.find((e=>e==t));)t=Math.floor(1e7*Math.random());return t}(r.getIds()));let n=null!==(t=window.localStorage.getItem(u(this,r,"f",o)))&&void 0!==t?t:u(this,r,"m",c).call(this),i=JSON.parse(n);if(0==i.length)i.push(e);else{let t=!1;for(let n=0;n<i.length;n++){let r=i[n];if(r.meta.id==e.meta.id){Object.assign(r,e),t=!0;break}}t||i.push(e)}let a=JSON.stringify(i);window.localStorage.setItem(u(this,r,"f",o),a),u(this,r,"m",l).call(this,e.meta.id,e.meta.type)}static updateSlideData(e){const t=this.getStorageData(e);let n=!1;for(let i=0;i<t.length;i++){let r=t[i];if(r.meta.id==e.meta.id){Object.assign(r,e),n=!0;break}}let i=JSON.stringify(t);window.localStorage.setItem(u(this,r,"f",o),i),u(this,r,"m",a).call(this,e.meta.id,e.meta.type)}static removeSlideDataById(e){const t=this.getSlideData(e);this.removeSlideData(t)}static removeSlideData(e){const t=this.getStorageData(e).filter((t=>t.meta.id!=e.meta.id));r.reorder(t);let n=JSON.stringify(t);window.localStorage.setItem(u(this,r,"f",o),n),u(this,r,"m",s).call(this,e.meta.id,e.meta.type)}static reorder(e){for(var t=0;t<e.length;t++)e[t].meta.order=t+1}static getStorageData(e){if(null==e)return void console.error("questionData value cannot be null");if(null==e.meta.id)return void console.error("questionData.meta.id cannot be null");let t=window.localStorage.getItem(u(this,r,"f",o));if(null==t)return void console.error("There is no section "+u(this,r,"f",o)+" in storage");let n=JSON.parse(t);if(0!=n.length)return n;console.error(`There is not entity in array "${u(this,r,"f",o)} with id: ${e.meta.id}"`)}static getIds(){let e=window.localStorage.getItem(u(this,r,"f",o)),t=JSON.parse(e);return null==t||0==t.length?[]:t.map((e=>e.meta.id))}static getSlideData(e){let t=window.localStorage.getItem(u(this,r,"f",o));if(null==t||""==t)return void console.error("There is no "+u(this,r,"f",o)+" section in storage");let n=JSON.parse(t).filter((t=>t.meta.id==e))[0];if(null!=n)return n;console.error("There is no data in storage with id: "+e)}}r=h,l=function(e,t){let n=new f(e,t);u(this,r,"m",d).call(this,"SlideAdded",n)},a=function(e,t){let n=new f(e,t);u(this,r,"m",d).call(this,"SlideUpdated",n)},s=function(e,t){let n=new f(e,t);u(this,r,"m",d).call(this,"SlideRemoved",n)},d=function(e,t){let n=new CustomEvent(e,{detail:t});document.querySelector("#global-meta").dispatchEvent(n)},c=function(){let e=JSON.stringify([]);return window.localStorage.setItem(u(this,r,"f",o),e),e},o={value:"Slides"};class f{constructor(e,t){this.slideId=e,this.type=t}}$((function(){return e=this,i=void 0,o=function*(){let e=$("#right-sidebar-container"),i=new t;i.rendered.title="Info slide",i.rendered.imageModifier="slide-wrapper__thumbnail-picture--info",i.rendered.schemeName="info",i.rendered.schemeContent='{ "Title":"", "Subtitle":"", "Infotitle":"", "Infotext":"", "NextPrevButtons": [{"Button next":"asdz"}, {"Button previous":"" }] }';let r=new n;r.rendered.innerContent=yield i.render(),e.append(yield r.render());let o=new t;o.rendered.title="Question slide",o.rendered.imageModifier="slide-wrapper__thumbnail-picture--question",o.rendered.schemeName="question",o.rendered.schemeContent='{ "Title":"", "Subtitle":"", "Question":"", "Assistive text":"", "Buttons": [ {"Yes": "Yes", "Value": 1}, {"No": "No", "Value": 2}], "NextPrevButtons": [{"Button next":"asdz"}, {"Button previous":"" }] }';let l=new n;l.rendered.innerContent=yield o.render(),e.append(yield l.render());let a=new t;a.rendered.title="Multi selection slide",a.rendered.imageModifier="slide-wrapper__thumbnail-picture--multi",a.rendered.schemeName="multiselect",a.rendered.schemeContent='{ "Title":"", "Subtitle":"", "Question":"", "Assistive text":"", "Buttons": [ {"Variant1": "Variant1", "Value": 1}], "NextPrevButtons": [{"Button next":"asdz"}, {"Button previous":"" }], "Multiselect": true }';let s=new n;s.rendered.innerContent=yield a.render(),e.append(yield s.render()),h.initialize()},new((r=void 0)||(r=Promise))((function(t,n){function l(e){try{s(o.next(e))}catch(e){n(e)}}function a(e){try{s(o.throw(e))}catch(e){n(e)}}function s(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(e){e(n)}))).then(l,a)}s((o=o.apply(e,i||[])).next())}));var e,i,r,o}))})();